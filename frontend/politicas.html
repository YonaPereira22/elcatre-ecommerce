<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Pol√≠ticas ‚Äî El Catre S.R.L</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css">
</head>
<body class="frame">

  <header class="topbar">
    <div class="container wrap">
      <a class="brand" href="index.html">
        <img src="img/logo-el-catre.jpg" alt="El Catre S.R.L">
        <strong>El Catre S.R.L ‚Äî Muebler√≠a</strong>
      </a>
      <nav class="menu" id="main-menu">
        <a href="index.html"        data-match="index.html">Inicio</a>
        <a href="productos.html"    data-match="productos.html">Productos</a>
        <a href="carrito.html"      data-match="carrito.html">Carrito</a>
        <a href="contacto.html"     data-match="contacto.html">Contacto</a>
        <a href="nosotros.html"     data-match="nosotros.html">Nosotros</a>
        <a href="politicas.html"    data-match="politicas.html">Pol√≠ticas</a>
      </nav>
      <div class="auth">
        <a class="btn" href="login.html">Login</a>
        <a class="btn white" href="register.html">Registrarse</a>
      </div>
    </div>
  </header>

  <main class="page-content">
    <h1>Pol√≠ticas de la empresa El Catre S.R.L</h1>

    <h2>Env√≠os</h2>
    <ul>
      <li>Gratis dentro de Santa Clara de Olimar.</li>
      <li>Resto del pa√≠s: costo seg√∫n zona/volumen con operadores terceros.</li>
      <li>Se permiten env√≠os parciales con consentimiento del cliente.</li>
    </ul>

    <h2>Armado</h2>
    <ul>
      <li>Disponible para muebles, solo dentro de Santa Clara de Olimar.</li>
      <li>Se cobra por producto (tabla por categor√≠a). Sin recargo por escaleras/ascensor.</li>
    </ul>

    <h2>Cambios y devoluciones</h2>
    <ul>
      <li>10 d√≠as para cambios en productos est√°ndar sin uso.</li>
      <li>Electrodom√©sticos sujetos a pol√≠tica del proveedor y normativa vigente.</li>
    </ul>

    <h2>Garant√≠as</h2>
    <ul>
      <li>Seg√∫n proveedor y tipolog√≠a. El uso indebido no est√° cubierto.</li>
    </ul>

    <h2>Privacidad</h2>
    <p>
      <li>Los datos se utilizan para gestionar compras y comunicaciones relacionadas al pedido.
      <li>Pod√©s solicitar acceso o eliminaci√≥n de tus datos escribiendo a nuestro canal de contacto.
    </p>
  </main>

  <!-- Marca autom√°ticamente el link activo -->
  <script>
    (function(){
      const here = location.pathname.split('/').pop() || 'index.html';
      document.querySelectorAll('#main-menu a').forEach(a=>{
        if(a.dataset.match === here) a.classList.add('active');
      });
    })();
  </script>
<script>
document.addEventListener("DOMContentLoaded", async function() {
  const authBox = document.getElementById('auth-box');
  if (!authBox) return;

  // --- Recuperar del almacenamiento local
  let user = null;
  try {
    user = JSON.parse(localStorage.getItem('usuarioActual')) || null;
  } catch(e) {
    user = null;
  }

  // --- Verificar sesi√≥n con el backend
  try {
    const res = await fetch('http://localhost/Muebleria/backend/api.php?action=auth_me', {
      credentials: 'include'
    });
    const data = await res.json();
    if (data.authenticated && data.user) {
      user = data.user;
      localStorage.setItem('usuarioActual', JSON.stringify(user));
    }
  } catch(err) {
    console.warn('No se pudo verificar la sesi√≥n con el backend', err);
  }

  // --- Mostrar seg√∫n el estado
  if (user) {
    authBox.innerHTML = `
      <span>üëã Hola, <strong>${user.nombre || user.email}</strong></span>
      <button class="btn white" onclick="logout()">Cerrar sesi√≥n</button>
    `;
  } else {
    authBox.innerHTML = `
      <a class="btn" href="login.html">Login</a>
      <a class="btn white" href="register.html">Registrarse</a>
    `;
  }

  // --- Cierre de sesi√≥n global
  window.logout = async function() {
    localStorage.removeItem('usuarioActual');
    try {
      await fetch('http://localhost/Muebleria/backend/api.php?action=auth_logout', {
        method: 'POST',
        credentials: 'include'
      });
    } catch(e) {}
    location.href = 'login.html';
  };
});
</script>

</body>
</html>
